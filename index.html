<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë¬¸ì œì§‘ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes pulse {
      0%,100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    body {
      margin: 0;
      height: 100vh;
      font-family: 'Noto Sans KR', sans-serif;
      background: radial-gradient(ellipse at top right, #1a1c2e, #0a0b12);
      color: #f2f4f7;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .chat-container {
      width: 400px;
      min-height: 600px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      backdrop-filter: blur(15px);
      box-shadow: 0 0 25px rgba(0,0,0,0.4);
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      animation: fadeIn 0.6s ease;
    }

    .title {
      text-align: center;
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
      letter-spacing: 1px;
      margin-bottom: 10px;
    }

    .display-area {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      margin-bottom: 10px;
    }

    .message {
      background: linear-gradient(135deg, #3a3f74, #1f233b);
      border-radius: 12px;
      padding: 12px 16px;
      margin-bottom: 8px;
      animation: fadeIn 0.3s ease;
    }

    .options {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      animation: fadeIn 0.4s ease;
    }

    button {
      background: linear-gradient(135deg, #5b78f6, #3ad1ff);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 10px 18px;
      font-size: 0.95rem;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    button:hover {
      transform: scale(1.08);
      box-shadow: 0 0 10px rgba(91,120,246,0.6);
    }
    .footer-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }
    .footer-buttons button {
      flex: 1;
      margin: 0 5px;
      font-size: 0.85rem;
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.2);
    }
    .footer-buttons button:hover {
      background: rgba(255,255,255,0.3);
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="title">ë¬¸ì œì§‘ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ğŸš€</div>
    <div id="display" class="display-area"></div>
    <div class="options" id="options"></div>
    <div class="footer-buttons">
      <button id="backBtn">â¬…ï¸ ë’¤ë¡œê°€ê¸°</button>
      <button id="restartBtn">ğŸ” ì²˜ìŒìœ¼ë¡œ</button>
    </div>
  </div>

  <script>
    const bookData = {
      "ê°œë…ì„œ": {
        1: ["ìˆ˜í•™ì˜ ë°”ì´ë¸”", "ë§ˆí”Œ êµê³¼ì„œ", "ìˆ˜í•™ì˜ ì™•ë„", "ì˜¬ë¦¼í¬ìŠ¤ ìˆ˜í•™", "ê°œë… í”ŒëŸ¬ìŠ¤ ìœ í˜• ê³ ë“± ìˆ˜í•™", "ì´ìœ ìˆëŠ” ìˆ˜í•™ ê°œë… SOS", "ì…€íŒŒ í•´ë²•ìˆ˜í•™"],
        2: ["ìˆ˜í•™ì˜ ìƒ˜", "ê°œë… ìˆ", "í’ì‚°ì", "ê°œë…ì›ë¦¬"],
        3: ["ê¸°ë³¸ ìˆ˜í•™ì˜ ì •ì„", "ìˆ˜í•™ì¤‘ì‹¬ ê³ ë“±ìˆ˜í•™", "ë©”ê°€ìŠ¤í„°ë”” ë¬¸ì œ ê¸°ë³¸ì„œ CPRìˆ˜í•™", "ë” ê°œë… ë¸”ë™ë¼ë²¨"],
        4: ["ì‹¤ë ¥ ìˆ˜í•™ì˜ ì •ì„", "ìˆ¨ë§ˆì¿°ë¼ìš°ë°"]
      },
      "ìœ í˜•Â·ì‹¬í™”ì„œ": {
        1: ["ìˆ˜ë ¥ì¶©ì „", "ìˆ˜í•™ì˜ ë°”ì´ë¸” BOB", "ê°œë… í”ŒëŸ¬ìŠ¤ ìœ í˜• ë¼ì´íŠ¸", "ë¼ì´íŠ¸ ìˆ", "ìœ í˜• í•´ê²°ì˜ ë²•ì¹™", "ì˜¬ë¦¼í¬ìŠ¤ ë‹¥í„°ë§"],
        2: ["ê°œë…ì›ë¦¬ RPM", "í’ì‚°ì í•„ìˆ˜ìœ í˜•", "ë‚´ê³µì˜ í˜", "ì˜¬ë¦¬ë“œ", "í•˜ì´ë¼ì´íŠ¸ ë‹¨ê¸° íŠ¹ê°•", "ì‹¬í”Œ ìì´ìŠ¤í† ë¦¬"],
        3: ["ìˆ ìˆ˜í•™", "ë§ˆí”Œ ì‹œë„ˆì§€", "ì¼ë“±ê¸‰ ìˆ˜í•™", "1ë“±ê¸‰ ë§Œë“¤ê¸°"],
        4: ["ì¼í’ˆ", "ì˜¬ë¦¼í¬ìŠ¤ ê³ ë‚œë„", "ìˆ˜ëŠ¥ë‹¤í", "ì ˆëŒ€ë“±ê¸‰", "ìœ í˜•+ë‚´ì‹  ê³ ìŸì´", "ë¸”ë™ë¼ë²¨", "ë‚´ì‹  í•˜ì´ì•¤ë“œ", "í˜„ìš°ì§„ ë‰´ëŸ°-ì‹œëƒ…ìŠ¤", "ìˆ˜í•™ì˜ ì‹ "],
        5: ["TOT", "531 í•˜ì´í¼", "ì ˆëŒ€ë“±ê¸‰ ì½”ë“œì— ", "í˜„ìš°ì§„ ë“œë¦´"]
      },
      "ê¸°ì¶œ": [
        "ìì´ìŠ¤í† ë¦¬", "ì§± ì–´ë ¤ìš´ ìœ í˜• ê³ ë‚œë„ 4ì ì§œë¦¬ ìˆ˜í•™", "ë„ˆí¬ë“¤ì˜ ê¸°ì¶œë¬¸ì œ", "ë§ˆí”Œ ìˆ˜ëŠ¥ê¸°ì¶œì´ì •ë¦¬", "ìˆ˜ëŠ¥ ê¸°ì¶œì˜ ë°”ì´ë¸”",
        "ì‹¤ì „+ìˆ˜ëŠ¥ ê³ ìŸì´", "ì–´ì‚¼ì‰¬ì‚¬", "ë„ˆê¸°ì¶œ", "ìˆ˜ëŠ¥ ê¸°ì¶œì˜ ë¯¸ë˜", "ìˆ ê¸°ì¶œ", "í‹°ì˜¤í”¼ í´ë˜ìŠ¤ ìˆ˜ëŠ¥ ê¸°ì¶œë¬¸ì œì§‘",
        "ì´ë™í›ˆ ê¸°ì¶œë¬¸ì œì§‘", "ë‹´ê¸ˆì§ˆ", "ë°±ë¯¸", "ê¸°ì¶œì˜ ê³ ë°±", "ë§ˆë”í……", "ì˜¬ë¦¼í¬ìŠ¤ ê¸°ì¶œë¬¸ì œì§‘"
      ]
    };

    const display = document.getElementById("display");
    const options = document.getElementById("options");
    const backBtn = document.getElementById("backBtn");
    const restartBtn = document.getElementById("restartBtn");

    let history = [];
    let step = "start";
    let selectedType = null;
    let selectedLevel = null;

    function showMessage(text) {
      const msg = document.createElement("div");
      msg.classList.add("message");
      msg.textContent = text;
      display.appendChild(msg);
      display.scrollTop = display.scrollHeight;
    }

    function setOptions(arr, callback) {
      options.innerHTML = "";
      arr.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => {
          history.push({ step, selectedType, selectedLevel });
          callback(opt);
        };
        options.appendChild(btn);
      });
    }

    function goBack() {
      if (history.length === 0) return;
      const last = history.pop();
      step = last.step;
      selectedType = last.selectedType;
      selectedLevel = last.selectedLevel;
      options.innerHTML = "";
      if (step === "start") startChat();
      else if (step === "type") chooseType();
      else if (step === "level") chooseLevel(selectedType);
    }

    function restart() {
      display.innerHTML = "";
      options.innerHTML = "";
      history = [];
      step = "start";
      selectedType = null;
      selectedLevel = null;
      startChat();
    }

    function startChat() {
      showMessage("ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ ë¬¸ì œì§‘ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤.");
      showMessage("ì–´ë–¤ ì¢…ë¥˜ì˜ ë¬¸ì œì§‘ì„ ì°¾ê³  ê³„ì‹ ê°€ìš”?");
      step = "type";
      setOptions(["ê°œë…ì„œ", "ìœ í˜•Â·ì‹¬í™”ì„œ", "ê¸°ì¶œ"], (type) => {
        selectedType = type;
        if (type === "ê¸°ì¶œ") recommend();
        else chooseLevel(type);
      });
    }

    function chooseLevel(type) {
      let maxLevel = type === "ê°œë…ì„œ" ? 4 : 5;
      showMessage(`${type}ì˜ ë‚œì´ë„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš” (1~${maxLevel})`);
      step = "level";
      const range = Array.from({ length: maxLevel }, (_, i) => (i + 1).toString());
      setOptions(range, (lvl) => {
        selectedLevel = parseInt(lvl);
        recommend();
      });
    }

    function recommend() {
      options.innerHTML = "";
      let result = [];
      if (selectedType === "ê¸°ì¶œ") {
        result = bookData["ê¸°ì¶œ"];
        showMessage("ğŸ” ì¶”ì²œ ê¸°ì¶œ ë¬¸ì œì§‘:");
      } else {
        const data = bookData[selectedType][selectedLevel];
        result = data || [];
        showMessage(`ğŸ“˜ ì¶”ì²œ ${selectedType} (${selectedLevel}ë‹¨ê³„):`);
      }
      if (result.length > 0) {
        result.forEach(name => showMessage("â€¢ " + name));
      } else {
        showMessage("ğŸ˜¥ í•´ë‹¹ ì¡°ê±´ì— ë§ëŠ” ë¬¸ì œì§‘ì´ ì—†ìŠµë‹ˆë‹¤.");
      }
      showMessage("âœ… ì¶”ì²œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    backBtn.onclick = goBack;
    restartBtn.onclick = restart;

    startChat();
  </script>
</body>
</html>
